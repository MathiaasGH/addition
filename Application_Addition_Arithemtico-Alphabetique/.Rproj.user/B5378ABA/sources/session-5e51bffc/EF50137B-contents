data=df1
data1 = data.frame(
  Subject = data$Subject,
  session = data$Session,
  Ensemble = data$Ensemble,
  Addend = data$Addend,
  Augend = data$Augend,
  rt = data$Equation.RT,
  Accuracy = data$Equation.ACC,
  Response = data$Response,
  ResponseType = data$ResponseType,
  Trial = data$Trial,
  Block = data$Block
)

data=df2
data2 = data.frame(
  Subject = data$Subject,
  session = data$Session,
  Ensemble = data$Ensemble,
  Addend = data$Addend,
  Augend = data$Augend,
  rt = data$Equation.RT,
  Accuracy = data$Equation.ACC,
  Response = data$Response,
  ResponseType = data$ResponseType,
  Trial = data$Trial,
  Block = data$Block
)

unique_participant = intersect(unique(data1$Subject), unique(data2$Subject))
subject_index = c()

for(participant in unique_participant){
  data1_subset = data1[data1$Subject==participant,]
  data2_subset = data2[data2$Subject==participant,]
  unique_session_1 = sort(unique(as.numeric(data1_subset$session)))
  unique_session_2 = sort(unique(as.numeric(data2_subset$session)))
  if(setequal(unique_session_1, 1:12))
    if(setequal(unique_session_2, 13:15))
      subject_index = c(subject_index, participant)
}

data1 = data1[data1$Subject %in% subject_index,]
data2 = data2[data2$Subject %in% subject_index,]

df1_sort <- data1[order(data1$Subject, data1$session, data1$Block, data1$Trial), ]
df1_sort <- df1_sort[ , ] 
rownames(df1_sort) <- NULL


df2_sort <- data2[order(data2$Subject, data2$session, data2$Block, data2$Trial), ]
df2_sort <- df2_sort[ , ] 
rownames(df2_sort) <- NULL



final_data = data.frame()
for(participant in unique(data1$Subject)){
  selected_data1 = df1_sort[df1_sort$Subject==participant,]
  selected_data2 = df2_sort[df2_sort$Subject==participant,]
  merge = rbind(selected_data1, selected_data2)
  final_data = rbind(final_data, merge)
}

CSC_1_15 = final_data[final_data$Ensemble=="333" |final_data$Ensemble=="444",]
NCSC_1_15 = final_data[final_data$Ensemble=="111" |final_data$Ensemble=="222",]

rownames(CSC_1_15) <- NULL
rownames(NCSC_1_15) <- NULL
